<% if user_signed_in? %>
<div class="container-fluid h-100">
    <div class="row h-100">
		<%= render 'partials/nav' %>
		<div class="col">
			<div class="col-12">
				<h1 class="col-6 text-center mx-auto mt-5 mb-5">Hello, <%= current_user.username %></h1>
			</div>
	<!-- 	<p id="notice"><%#= notice %></p> -->
			<div class="col-xs-12 col-md-6 mx-auto">
				<div id="accordion">
					<% @categories_months.each do |month, categories| %>
						<div class="card parent-date">

							<div class="card-header bg-info" id="headingOne">
								<h5 class="mb-0">
									<button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
									<strong><%= month.strftime('%B, %Y') %></strong>
									</button>
								</h5>
							</div>

							<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
								<div class="container">
									<% for category in categories %>
										<div class="card mt-3">
											<div class="card-header"><strong><%= category.name %> on <%= category.category_create_date.to_date.to_s(:long) %></strong></div>
											<% category.products.each do |product| %>
												<li class="list-group-item"> <%= product.name %></li>
												<li class="product-price list-group-item"><%= product.price %></li>
											<% end %>
										</div>
									<% end %>
									<li class="categories-total list-group-item bg-warning"><strong>Total: </strong></li>
								</div>
							</div>
						</div>  
					<% end %> 
				</div>
			</div>
		</div>
	</div>
</div>
<% else %>
<div class="container-fluid logged-out-homepage">
	<div class="row align-items-center h-100">
		<div class="col-xs-12 col-md-6 text-center">
			<%= image_tag("tracker-logo.png", :alt => "logo", :class => "logo") %>
			<p>Manage your expenses by categories, items, or date. Easy.</p>
		</div>
		<div class="col-xs-12 col-md-6">
			<div class="card mx-auto">
				<div class="login-form">
					<div class="row no-gutters">
						<button type="button" class="col link-to-login btn mint-hover">Log in</button>
						<button type="button" class="col link-to-signup btn btn-mint">Sign up</button>
					</div>
					<div class="p-4">
						<%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
							<div class="field">
								<%= f.label :email %><br />
								<%= f.email_field :email, autofocus: true, autocomplete: "email", class: "form-control" %>
							</div>

							<div class="field">
								<%= f.label :password %><br />
								<%= f.password_field :password, autocomplete: "off", class: "form-control" %>
							</div>

							<% if devise_mapping.rememberable? -%>
								<div class="field">
									<%= f.check_box :remember_me %>
									<%= f.label :remember_me %>
								</div>
							<% end -%>

							<div class="actions text-center">
								<%= f.submit "Log in", class: "btn-mint btn-lg" %>
							</div>
						<% end %>
					</div>
				</div>
			</div>

			<div class="card mx-auto">
				<div class="signup-form">
					<div class="row no-gutters">
						<button type="button" class="col link-to-login btn btn-mint">Log in</button>
						<button type="button" class="col link-to-signup btn btn-mint">Sign up</button>
					</div>
					<div class="p-4">
						<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
							<%= devise_error_messages! %>

								<div class="field">
									<%= f.label :email %><br />
									<%= f.email_field :email, autofocus: true, autocomplete: "email", class: "form-control" %>
								</div>

								<div class="field">
									<%= f.label :username %><br />
									<%= f.text_field :username, autofocus: true, autocomplete: "username", class: "form-control" %>
								</div>

								<div class="field">
									<%= f.label :password %>
										<% if @minimum_password_length %>
											<em>(<%= @minimum_password_length %> characters minimum)</em>
										<% end %><br />
									<%= f.password_field :password, autocomplete: "off", class: "form-control"  %>
								</div>

								<div class="field">
									<%= f.label :password_confirmation %><br />
									<%= f.password_field :password_confirmation, autocomplete: "off", class: "form-control"  %>
								</div>

								<div class="actions text-center">
									<%= f.submit "Sign up", class: "btn-mint btn-lg" %>
								</div>
						<% end %>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<% end %>